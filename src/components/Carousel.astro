---
// Define your images directly with URL paths
const images = [
  { 
    src: '/Carousel image 12/bill boards 3.png', 
    alt: 'Slide 1',
    title: 'Innovative Display Solutions',
    description: 'Transforming spaces with cutting-edge visual technology'
  },
  { 
    src: '/Carousel image 12/Business bill boards 1.png', 
    alt: 'Slide 2',
    title: 'Seamless Integration',
    description: 'Connect and control your displays with ease'
  },
  { src: '/Carousel image 12/Business bill boards 3.png',
    alt: 'Slide 3', 
    title: 'Crystal Clear Quality', 
    description: 'Experience visuals in stunning detail and clarity' 
  },
  { src: '/Carousel image 12/Display 01 (LED).png', 
    alt: 'Slide 4',
    title: 'Interactive Educational Boards',
    description: 'Enhance learning experiences with interactive educational boards' 
  },
  { src: '/Carousel image 12/Display 02 (LCD).png', 
    alt: 'Slide 5', 
    title: 'Digital Billboards', 
    description: 'Boost brand visibility with digital billboards'
 },
  { src: '/Carousel image 12/Display 03 (LED).png', 
    alt: 'Slide 6', 
    title: 'Seamless Integration', 
    description: 'Connect and control your displays with ease' 
  },
  { src: '/Carousel image 12/Display 4 (LCD).png', 
    alt: 'Slide 7', 
    title: 'Crystal Clear Quality', 
    description: 'Experience visuals in stunning detail and clarity' 
  },
  { src: '/Carousel image 12/Display 5 (LED).png', 
    alt: 'Slide 8', 
    title: 'Interactive Educational Boards', 
    description: 'Enhance learning experiences with interactive educational boards'
 },
  { src: '/Carousel image 12/Display 6 (LCD).png', 
    alt: 'Slide 9',
    title: 'Digital Billboards', 
    description: 'Boost brand visibility with digital billboards' 
  },
  { src: '/Carousel image 12/Educational Monitors 1.png', 
    alt: 'Slide 10', 
    title: 'Seamless Integration', 
    description: 'Connect and control your displays with ease'
 },
  { src: '/Carousel image 12/Educational Monitors 2.png', 
    alt: 'Slide 11', 
    title: 'Crystal Clear Quality', 
    description: 'Experience visuals in stunning detail and clarity'
 },
  { src: '/Carousel image 12/Educational Monitors 3.png', 
    alt: 'Slide 12', 
    title: 'Interactive Educational Boards', 
    description: 'Enhance learning experiences with interactive educational boards' },
];
---

<!-- Improved mobile-responsive container -->
<div class="relative overflow-hidden h-[300px] sm:h-[400px] md:h-[500px] lg:h-[580px] mx-auto rounded-xl shadow-2xl my-4 sm:my-6 max-w-[98%] sm:max-w-[95%] mt-6 sm:mt-10" id="carousel-container">
  <!-- Carousel container with subtle pattern overlay -->
  <div class="carousel-container relative h-full">
    <!-- Pattern overlay -->
    <div class="absolute inset-0 bg-[url('data:image/svg+xml;base64,PHN2ZyB3aWR0aD0iNjAiIGhlaWdodD0iNjAiIHZpZXdCb3g9IjAgMCA2MCA2MCIgeG1sbnM9Imh0dHA6Ly93d3cudzMub3JnLzIwMDAvc3ZnIj48ZyBmaWxsPSJub25lIiBmaWxsLXJ1bGU9ImV2ZW5vZGQiPjxwYXRoIGQ9Ik0zNiAxOGMxLjIgMCAyIC44IDIgMnYyYzAgMS4yLS44IDItMiAycy0yLS44LTItMnYtMmMwLTEuMi44LTIgMi0ybTAgMTBjMS4yIDAgMiAuOCAyIDJ2MmMwIDEuMi0uOCAyLTIgMnMtMi0uOC0yLTJ2LTJjMC0xLjIuOC0yIDItMm0tMTAtMTBjMS4yIDAgMiAuOCAyIDJ2MmMwIDEuMi0uOCAyLTIgMnMtMi0uOC0yLTJ2LTJjMC0xLjIuOC0yIDItMm0wIDEwYzEuMiAwIDIgLjggMiAydjJjMCAxLjItLjggMi0yIDJzLTItLjgtMi0ydi0yYzAtMS4yLjgtMiAyLTJtLTEwLTEwYzEuMiAwIDIgLjggMiAydjJjMCAxLjItLjggMi0yIDJzLTItLjgtMi0ydi0yYzAtMS4yLjgtMiAyLTJtMCAxMGMxLjIgMCAyIC44IDIgMnYyYzAgMS4yLS44IDItMiAycy0yLS44LTItMnYtMmMwLTEuMi44LTIgMi0yIiBmaWxsPSIjZmZmIiBmaWxsLW9wYWNpdHk9Ii4wNSIvPjwvZz48L3N2Zz4=')] opacity-30 mix-blend-overlay pointer-events-none"></div>
    
    {images.map((image, index) => (
      <div class="carousel-slide absolute inset-0 opacity-0 transition-all duration-1000 ease-out transform translate-x-full"
           data-index={index}>
        <!-- Image container with enhanced effects -->
        <div class="relative h-full overflow-hidden">
          <img 
            src={image.src} 
            alt={image.alt}
            class="w-full h-full object-contain object-center scale-105 transition-transform duration-7000 carousel-image"
            loading={index < 2 ? "eager" : "lazy"}
            onerror="this.onerror=null; this.src='/placeholder-image.jpg'; console.error('Failed to load: ' + this.src);"
          />
          
          <!-- Advanced gradient overlay with texture -->
          <div class="absolute inset-0 to-transparent"></div>
          
          <!-- Content overlay with animated entry - Adding titles and descriptions back -->
          <div class="absolute inset-0 flex flex-col justify-end px-4 sm:px-8 md:px-16 lg:px-24 pb-10 sm:pb-16 slide-content opacity-0">
            <div class="bg-black/40 backdrop-blur-sm p-3 sm:p-4 rounded-lg max-w-[90%] sm:max-w-[80%] md:max-w-[70%] mx-auto sm:mx-0">
              <h3 class="text-white text-base sm:text-xl md:text-2xl font-bold">{image.title}</h3>
              <p class="text-white/80 text-xs sm:text-base mt-1">{image.description}</p>
            </div>
          </div>
        </div>
      </div>
    ))}
  </div>

  <!-- Always-visible navigation arrows for mobile -->
  <button 
    class="absolute left-2 sm:left-4 top-1/2 -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-black/30 backdrop-blur-md flex items-center justify-center text-white hover:bg-white/20 transition-all border border-white/20 opacity-70 sm:opacity-0 sm:group-hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-white/40 nav-prev touch-action-manipulation z-20" 
    aria-label="Previous slide"
  >
    <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7"></path>
    </svg>
  </button>
  
  <button 
    class="absolute right-2 sm:right-4 top-1/2 -translate-y-1/2 w-8 h-8 sm:w-10 sm:h-10 rounded-full bg-black/30 backdrop-blur-md flex items-center justify-center text-white hover:bg-white/20 transition-all border border-white/20 opacity-70 sm:opacity-0 sm:group-hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-white/40 nav-next touch-action-manipulation z-20" 
    aria-label="Next slide"
  >
    <svg class="w-4 h-4 sm:w-5 sm:h-5" fill="none" stroke="currentColor" viewBox="0 0 24 24">
      <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7"></path>
    </svg>
  </button>

  <!-- Simplified navigation dots for mobile -->
  <div class="absolute bottom-3 sm:bottom-6 left-0 right-0 flex items-center justify-center">
    <div class="flex space-x-1 sm:space-x-2 px-2 sm:px-4 py-1 sm:py-2 rounded-full bg-black/30 backdrop-blur-md border border-white/10">
      <span class="text-white/70 text-xs sm:text-sm mr-1 sm:mr-2 slide-counter">1/{images.length}</span>
      <div class="flex space-x-1 sm:space-x-2 overflow-x-auto no-scrollbar max-w-[60vw] sm:max-w-none">
        {images.map((_, index) => (
          <button
            class="w-1.5 h-1.5 sm:w-2 sm:h-2 rounded-full bg-white/30 hover:bg-white transition-all duration-200 nav-dot hover:scale-125 flex-shrink-0"
            data-index={index}
            aria-label={`Go to slide ${index + 1}`}
          >
          </button>
        ))}
      </div>
    </div>
  </div>
  
  <!-- Progress bar -->
  <div class="absolute bottom-0 left-0 right-0 h-1">
    <div class="h-full bg-gradient-to-r from-blue-500 via-indigo-500 to-purple-500 progress-bar w-0 transition-all duration-2000"></div>
  </div>
</div>

<script>
  document.addEventListener('DOMContentLoaded', () => {
    let currentSlide = 0;
    const slides = document.querySelectorAll('.carousel-slide');
    const dots = document.querySelectorAll('.nav-dot');
    const totalSlides = slides.length;
    let autoplayInterval: string | number | NodeJS.Timeout | undefined;
    const slideCounter = document.querySelector('.slide-counter');
    const progressBar = document.querySelector('.progress-bar');
    const prevButton = document.querySelector('.nav-prev');
    const nextButton = document.querySelector('.nav-next');
    const carouselContainer = document.querySelector('.carousel-container');
    
    // Handle touch events for mobile swiping
    let touchStartX = 0;
    let touchEndX = 0;
    
    function handleTouchStart(e: TouchEvent) {
      touchStartX = e.touches[0].clientX;
    }
    
    function handleTouchEnd(e: TouchEvent) {
      touchEndX = e.changedTouches[0].clientX;
      handleSwipe();
    }
    
    function handleSwipe() {
      const swipeThreshold = 50; // Minimum distance required for a swipe
      if (touchStartX - touchEndX > swipeThreshold) {
        // Swiped left, go to next slide
        nextSlide();
        resetAutoplay();
      } else if (touchEndX - touchStartX > swipeThreshold) {
        // Swiped right, go to previous slide
        prevSlide();
        resetAutoplay();
      }
    }

    // Improved updateSlide function
    function updateSlide(newIndex: number, direction: 'next' | 'prev' = 'next') {
      // Update slide counter
      if (slideCounter) {
        slideCounter.textContent = `${newIndex + 1}/${totalSlides}`;
      }
      
      // Reset progress bar
      if (progressBar) {
        progressBar.classList.remove('w-full');
        void (progressBar as HTMLElement).offsetWidth; // Force a reflow
        progressBar.classList.add('w-full');
      }

      // Update active dot indicator
      dots.forEach((dot, index) => {
        if (index === newIndex) {
          dot.classList.add('bg-white', 'scale-125');
          dot.classList.remove('bg-white/30');
        } else {
          dot.classList.remove('bg-white', 'scale-125');
          dot.classList.add('bg-white/30');
        }
      });

      // Update slides with direction-based animation
      slides.forEach((slide, index) => {
        const content = slide.querySelector('.slide-content');
        const image = slide.querySelector('.carousel-image');
        
        if (index === newIndex) {
          // Show this slide
          (slide as HTMLElement).style.zIndex = "10"; // Ensure active slide is on top
          
          if (direction === 'next') {
            slide.classList.remove('translate-x-full', '-translate-x-full');
          } else {
            slide.classList.remove('translate-x-full', '-translate-x-full');
          }
          
          slide.classList.remove('opacity-0');
          slide.classList.add('opacity-100');
          
          // Animate content with slight delay
          if (content) {
            content.classList.remove('opacity-0');
            content.classList.add('animate-fadeInUp');
          }
          
          // Subtle zoom effect on active slide
          if (image) {
            image.classList.add('scale-105');
            setTimeout(() => {
              image.classList.add('active-slide-zoom');
            }, 50);
          }
        } else {
          // Hide other slides
          (slide as HTMLElement).style.zIndex = "0";
          
          if (direction === 'next') {
            slide.classList.add('-translate-x-full');
            slide.classList.remove('translate-x-full', '-translate-x-0', 'translate-x-0');
          } else {
            slide.classList.add('translate-x-full');
            slide.classList.remove('-translate-x-full', '-translate-x-0', 'translate-x-0');
          }
          
          slide.classList.add('opacity-0');
          slide.classList.remove('opacity-100');
          
          // Reset content animation
          if (content) {
            content.classList.add('opacity-0');
            content.classList.remove('animate-fadeInUp');
          }
          
          // Reset zoom effect
          if (image) {
            image.classList.remove('active-slide-zoom');
          }
        }
      });

      currentSlide = newIndex;
    }

    function nextSlide() {
      const newIndex = (currentSlide + 1) % totalSlides;
      updateSlide(newIndex, 'next');
    }

    function prevSlide() {
      const newIndex = (currentSlide - 1 + totalSlides) % totalSlides;
      updateSlide(newIndex, 'prev');
    }

    function initCarousel() {
      // Show first slide
      updateSlide(0, 'next');

      // Add click events to dots
      dots.forEach((dot, index) => {
        dot.addEventListener('click', () => {
          const direction = index > currentSlide ? 'next' : 'prev';
          updateSlide(index, direction);
          resetAutoplay();
        });
      });

      // Add click events to navigation buttons
      prevButton?.addEventListener('click', () => {
        prevSlide();
        resetAutoplay();
      });

      nextButton?.addEventListener('click', () => {
        nextSlide();
        resetAutoplay();
      });

      // Add touch events for mobile swiping
      if (carouselContainer) {
        carouselContainer.addEventListener('touchstart', (e) => handleTouchStart(e as TouchEvent), {passive: true});
        carouselContainer.addEventListener('touchend', (e) => handleTouchEnd(e as TouchEvent), {passive: true});
      }

      // Make navigation controls visible on mobile
      if (window.innerWidth < 768) {
        prevButton?.classList.remove('opacity-0');
        nextButton?.classList.remove('opacity-0');
        prevButton?.classList.add('opacity-70');
        nextButton?.classList.add('opacity-70');
      } else {
        // Desktop hover behavior
        if (carouselContainer) {
          carouselContainer.addEventListener('mouseenter', () => {
            prevButton?.classList.remove('opacity-0');
            nextButton?.classList.remove('opacity-0');
            prevButton?.classList.add('opacity-100');
            nextButton?.classList.add('opacity-100');
          });
          
          carouselContainer.addEventListener('mouseleave', () => {
            prevButton?.classList.add('opacity-0');
            nextButton?.classList.add('opacity-0');
            prevButton?.classList.remove('opacity-100');
            nextButton?.classList.remove('opacity-100');
          });
        }
      }

      // Add keyboard navigation
      document.addEventListener('keydown', (e) => {
        if (e.key === 'ArrowLeft') {
          prevSlide();
          resetAutoplay();
        } else if (e.key === 'ArrowRight') {
          nextSlide();
          resetAutoplay();
        }
      });

      // Start autoplay
      startAutoplay();
    }

    function startAutoplay() {
      // Start progress bar animation
      if (progressBar) {
        progressBar.classList.remove('w-0');
        void (progressBar as HTMLElement).offsetWidth; // Force a reflow
        progressBar.classList.add('w-full');
      }
      
      autoplayInterval = setInterval(nextSlide, 6000); // Change slide every 6 seconds
    }

    function resetAutoplay() {
      clearInterval(autoplayInterval);
      startAutoplay();
    }

    // Initialize immediately
    (function() {
      // Small delay to ensure DOM elements are available
      setTimeout(() => {
        initCarousel();
      }, 100);
    })();

    // Handle resize events to adjust UI for mobile/desktop
    window.addEventListener('resize', () => {
      if (window.innerWidth < 768) {
        // Mobile view - always show navigation buttons
        prevButton?.classList.remove('opacity-0');
        nextButton?.classList.remove('opacity-0');
        prevButton?.classList.add('opacity-70');
        nextButton?.classList.add('opacity-70');
      } else {
        // Reset to desktop behavior - only show on hover
        if (!carouselContainer?.matches(':hover')) {
          prevButton?.classList.add('opacity-0');
          nextButton?.classList.add('opacity-0');
          prevButton?.classList.remove('opacity-100', 'opacity-70');
          nextButton?.classList.remove('opacity-100', 'opacity-70');
        }
      }
    });
  });
</script>

<style>
  @keyframes fadeInUp {
    from {
      opacity: 0;
      transform: translateY(20px);
    }
    to {
      opacity: 1;
      transform: translateY(0);
    }
  }
  
  .animate-fadeInUp {
    animation: fadeInUp 0.8s ease-out forwards;
  }
  
  .progress-bar {
    transition: width 5.95s linear;
  }
  
  .carousel-image {
    transition: transform 7s ease-out;
  }
  
  .active-slide-zoom {
    transform: scale(1.05);
  }
  
  /* Remove scrollbar but keep functionality */
  .no-scrollbar {
    -ms-overflow-style: none;  /* IE and Edge */
    scrollbar-width: none;  /* Firefox */
  }
  
  .no-scrollbar::-webkit-scrollbar {
    display: none;  /* Chrome, Safari and Opera */
  }
  
  /* Improve touch target size for mobile */
  .touch-action-manipulation {
    touch-action: manipulation;
  }
</style>